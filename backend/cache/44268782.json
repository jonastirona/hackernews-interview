{"hn_id": "44268782", "title": "OxCaml - a set of extensions to the OCaml programming language.", "url": "https://news.ycombinator.com/item?id=44268782", "article_url": "https://oxcaml.org/", "points": 246, "author": "lairv", "comments_count": 72, "time": 0, "full_article_html": "<main class=\"grid-container\">\n<div class=\"hero\"></div>\n<div class=\"content-feature\">\n<div class=\"content-narrow\">\n<h1>OxCaml</h1>\n<h2>OxCaml is a fast-moving set of extensions to the OCaml programming language.</h2>\n<p>It is both Jane Street’s production compiler, as well as a laboratory for experiments focused towards making\n            OCaml better for performance-oriented programming. Our hope is that these extensions can over time be\n            contributed to upstream OCaml.</p>\n</div>\n</div>\n<div class=\"content-main\">\n<section class=\"content-narrow goals\">\n<h2>OxCaml’s primary design goals are:</h2>\n<ul>\n<li>to provide <span class=\"bold\">safe, convenient, predictable</span> control over performance-critical\n                aspects\n                of\n                program behavior </li>\n<li>but <span class=\"bold\">only where you need it,</span></li>\n<li>and…<span class=\"bold\">in OCaml!</span></li>\n</ul>\n</section>\n<section class=\"content-narrow\">\n<h2>Let’s talk about what this means!</h2>\n<p>OxCaml’s extensions are meant to make OCaml a great language for performance engineering. Performance\n            engineering\n            requires control, and we want that control to be:</p>\n<ul>\n<li>Safe. Safety is a critical feature for making programmers more productive, and for shipping correct\n                code.\n                Languages that are pervasively unsafe are too hard to use correctly.</li>\n<li>Convenient. We want to provide control without bewildering programmers, or drowning them in endless\n                annotations.\n                To achieve this, we aim to maintain OCaml’s excellent type-inference, even as we add considerable\n                expressiveness\n                to the type-system.</li>\n<li>Predictable. One of the great features of OCaml today is that it’s pretty easy to look at OCaml code and\n                understand how it’s going to perform. We want our extensions to maintain and improve on that property,\n                by\n                making\n                key performance details explicit at the type-level.</li>\n</ul>\n<p>By \"only where you need it\", we mean that OxCaml’s extensions should be pay-as-you-go. While OxCaml aims to\n            provide\n            more power to optimize, you shouldn’t need to swallow extra complexity when you’re not using that power.</p>\n<p>By \"in OCaml\", we mean that all valid OCaml programs are also valid OxCaml programs. But our more profound\n            goal\n            is\n            for OxCaml to feel like OCaml evolving into a better version of itself, rather than a new language. For\n            that,\n            OxCaml\n            needs to honor OCaml’s basic design sensibility, and to preserve the safety, ease, and productivity that are\n            hallmarks of the language.</p>\n</section>\n<section class=\"content-narrow\">\n<h2>OxCaml’s extensions </h2>\n<p>Our extensions can be roughly organized into a few areas:</p>\n<div class=\"cards-grid\">\n<div class=\"card\">\n<h2>Fearless concurrency</h2>\n<p>Writing correct concurrent programs is notoriously difficult. OxCaml includes additions to the\n                    type\n                    system to\n                    statically rule out data races.</p>\n</div>\n<div class=\"card\">\n<h2>Layouts</h2>\n<p>OxCaml lets programmers specify the way their data is laid out in memory. It also provides native\n                    access\n                    to\n                    SIMD processor extensions.</p>\n</div>\n<div class=\"card\">\n<h2>Control over allocation</h2>\n<p>OxCaml gives programmers tools to control allocations, reducing GC pressure and making programs\n                    more\n                    cache efficient and deterministic.</p>\n</div>\n<div class=\"card\">\n<h2>Quality of life </h2>\n<p>OxCaml also contains some extensions that aren’t specifically about systems programming, but\n                    which\n                    we’ve\n                    found helpful in our day-to-day work:</p>\n<ul>\n<li>Polymorphic parameters</li>\n<li>Include functor</li>\n<li>Labeled tuples</li>\n<li>Immutable arrays</li>\n</ul>\n</div>\n</div>\n</section>\n<section class=\"content-narrow\">\n<h2>Using OxCaml</h2>\n<p>OxCaml is open-source, and we’re excited to welcome experimental users, especially researchers and tinkerers\n            who\n            can\n            kick the tires and provide feedback on the system. We put the emphasis on experimental because OxCaml makes\n            no\n            promises of stability or backwards compatibility for its extensions (though it does remain backwards\n            compatible\n            with\n            OCaml).</p>\n<p>OxCaml is intended to be easy to use, and to that end comes with modified versions of the standard OCaml\n            tool-set,\n            including:</p>\n<ul>\n<li>Package management, compatible with dune and opam</li>\n<li>Editor integration via the LSP-server</li>\n<li>Source code formatting</li>\n<li>Documentation generation</li>\n</ul>\n<p>Jane Street has long open sourced a bunch of useful libraries and tools. These are now released in two forms:\n            one\n            for\n            upstream OCaml, in which our extensions have been stripped, and one for OxCaml, where the extensions are\n            fully\n            leveraged.</p>\n<p>Not all extensions are erasable, so some libraries will be available only for OxCaml. We’ll export\n            OCaml-compatible\n            versions of these libraries when the necessary extensions are integrated upstream.</p>\n</section>\n</div>\n</main>", "article_metadata": {"title": "OxCaml | About", "description": "", "og_image": ""}, "screenshot_path": "/static/screenshots/44268782.png", "screenshot_error": null, "hook": "There was an error processing this article. Please click the link to read more.", "top_comments": [{"author": "Lyngbakr", "text": "The Janet Street folks, who created this, also did an interesting episode[0] of their podcast where they discuss performance considerations when working with OCaml. What I was curious about was applying a GC language to a use case that must have extremely low latency. It seems like an important consideration, as a GC pause in the middle of high-frequency trading could be problematic.\n\n[0] https://signalsandthreads.com/performance-engineering-on-har...\n\nreply", "depth": 0}, {"author": "rauljara", "text": "GC compactions were indeed a problem for a number of systems. The trading systems in general had a policy of not allocating after startup. JS has a library, called \"Zero\" that provides a host of non-allocating ways of doing things.\n\nreply", "depth": 1}, {"author": "jitl", "text": "Couldn’t find this after 6 seconds of googling, link?\n\nreply", "depth": 2}, {"author": "jallmann", "text": "The linked podcast episode mentions it.\n\nreply", "depth": 3}, {"author": "notnullorvoid", "text": "There's no mention of a library called zero, or even JavaScript.\n\nreply", "depth": 4}, {"author": "garbthetill", "text": "Im assuming the JS refers to Janes street\n\nreply", "depth": 5}, {"author": "notnullorvoid", "text": "That makes sense, I guess I've got web tunnel vision.\n\nreply", "depth": 6}, {"author": "jallmann", "text": "> This is what I like to call a dialect of OCaml. We speak in sometimes and sometimes we gently say it’s zero alloc OCaml. And the most notable thing about it, it tries to avoid touching the garbage collector ...\n\nreply", "depth": 5}, {"author": "great_wubwub", "text": "*Jane Street\n\nreply", "depth": 1}, {"author": "enricozb", "text": "Haven't looked at the link, but I think for a scenario like trading where there are market open and close times, you can just disable the GC, and restart the program after market close.\n\nreply", "depth": 1}], "analysis": {"analysis": "Error analyzing article content.", "metadata": {"error": "400 API key expired. Please renew the API key. [reason: \"API_KEY_INVALID\"\ndomain: \"googleapis.com\"\nmetadata {\n  key: \"service\"\n  value: \"generativelanguage.googleapis.com\"\n}\n, locale: \"en-US\"\nmessage: \"API key expired. Please renew the API key.\"\n]", "model": "gemini-1.5-flash"}}, "has_more": true}